name: Sync from DockerHub to GHCR

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0,6,12,18 * * *'

jobs:
  sync-images:
    name: Sync tagged images from DockerHub to GHCR
    runs-on: ubuntu-24.04
    steps:
      - name: Sync images
        uses: it-bens/container-registry-sync-action@263da06759b7a9d96fb099e71f44de7a2f529258 # v0.5.0
        with:
          sourceRepository: 'dockware/dev'
          loginToSourceRepository: 'true'
          sourceRepositoryUsername: ${{ secrets.DOCKERHUB_USERNAME }}
          sourceRepositoryPassword: ${{ secrets.DOCKERHUB_TOKEN }}
          targetRepository: 'ghcr.io/dockware-mirror/dev'
          loginToTargetRepository: 'true'
          targetRepositoryUsername: ${{ github.actor }}
          targetRepositoryPassword: ${{ secrets.GITHUB_TOKEN }}
          tags: '*'
          regClientConcurrency: 2
